// Generated by Pdef Objective-C generator.

#import <Foundation/Foundation.h>
#import "PDef.h"

{% for imported_definition in module.imported_definitions %}
@class {{ imported_definition.name }};

{% endfor %}

{% for definition in module.definitions -%}
{% if definition.doc %}
/** {{ definition.doc }} */
{% endif %}
{% if definition.is_enum %}
typedef NS_ENUM(NSInteger, {{ definition.name }}) {
    {% for value in definition.values %}
    {{ definition.name }}_{{ value.name }},
    {% endfor %}
};


{% elif definition.is_message %}
@interface {{ definition.name }} : {{ definition|objc_base }}
    {% for field in definition.declared_fields %}
@property (nonatomic) {{ field.type|objc_type }}{{ field.name }};
    {% endfor %}
@end


{% else %}
@protocol {{ definition.name }}
    {% for method in definition.declared_methods %}
{% if method.doc %}
/** {{ method.doc }} */
{% endif %}
    {% if not method.args %}
- (NSOperation *) {{ method.name }}Response:(void (^)(id result, NSError *error))response
    {% else %}
        {% set first_arg = method.args[0] %}
        {% set remaining_args = method.args[1:] %}
- (NSOperation *) {{ method.name }}{{ first_arg.name|upper_first }}({{ first_arg.type|objc_type }}){{ first_arg.name }}
    {% for arg in remaining_args %}
        {{ arg.name }}:({{ arg.type|objc_type }}){{ arg.name }}
    {% endfor %}
        response:(void (^)(id result, NSError *error))error;
    {% endif %}

    {% endfor %}
@end


{% endif %}
{% endfor -%}


// Descriptors.
{% for definition in module.definitions %}
    {% if definition.is_enum %}
PDEnumDescriptor *{{ definition.name }}Descriptor();
    {% elif definition.is_message %}
PDMessageDescriptor *{{ definition.name }}Descriptor();
    {% else %}
PDInterfaceDescriptor *{{ definition.name }}Descriptor();
    {% endif %}
{% endfor %}
